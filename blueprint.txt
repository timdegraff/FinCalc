================================================================================
TO DO LIST
================================================================================
[HUMAN-ONLY ACCESS: AI AGENTS ARE PROHIBITED FROM MODIFYING OR EDITING THIS BOX]
[THE FOLLOWING SECTION IS RESERVED FOR THE HUMAN ARCHITECT]

- [x] Align Gross Amount and Growth % in Income Cards.
- [x] Replace non-taxable checkbox with "Non-Taxable Until (Year)" input.
- [x] Fix persistence for Asset Class selects and Budget edits.
- [x] Move Benefit Threshold to Burndown and implement Strategy selection.
- [x] Add "Reset Market Growth" button to Assumptions.
- [x] Implement SWR indicator and Perpetual Wealth strategy.
- [x] Decouple Budget Sourcing (Sync/Manual) from Draw Strategy.
- [ ] Add "Net Income" preview to Income cards (Gross - Taxes - 401k - Match)
- [ ] Implement "Educational Needs" section in Budget for 529 drawdown tracking.

================================================================================
PROJECT OVERVIEW: FINCALC CO-PILOT
================================================================================
FinCalc is a high-fidelity financial architecture tool designed for precision 
planning, specifically optimized for the 2026 Michigan tax/benefit landscape. 
It differs from generic calculators by focusing on MAGI (Modified Adjusted Gross 
Income) manipulation to maximize state benefits like Medicaid and SNAP while 
simulating complex retirement bridges (72t/SEPP).

--------------------------------------------------------------------------------
CORE PHILOSOPHY & UI PREFERENCES
--------------------------------------------------------------------------------
1.  AESTHETICS: High-contrast "Dark Mode" (Slate-900/800). All numbers MUST use 
    'JetBrains Mono'. Labels use 'Inter' font with heavy tracking-tighter.
2.  COLOR LOGIC (STRICT ADHERENCE):
    - Teal (#14b8a6): Growth, Assets, Net Worth, HSA.
    - Pink (#ec4899): Expenses, Liabilities, Debts.
    - Magenta (#f472b6): Cash.
    - Amber (#f59e0b): Crypto (Bitcoin).
    - Yellow (#eab308): Metals (Gold).
    - Blue (#3b82f6): Pre-Tax / 401k / Strategy.
    - Purple (#a855f7): Post-Tax / Roth.
    - Indigo (#6366f1): Real Estate.
    - Rose (#fb7185): 529 Plan.
3.  REAL-TIME: Every slider and input must trigger an immediate re-calculation. 
    Persistence is handled via debounced Firebase saves on BOTH 'input' and 'change' events.
4.  ACCURACY: Tax brackets and benefit thresholds (FPL) are modeled on 2026 
    projections for Michigan.
5.  PRECISION: MAGI calculation is king. The system must accurately distinguish 
    between taxable and non-taxable income for benefit optimization.

--------------------------------------------------------------------------------
BURNDOWN CHART & STRATEGY ENGINE (KEY FEATURES)
--------------------------------------------------------------------------------
The Burndown engine is a year-by-year cashflow simulator that models the 
transition from accumulation to decumulation.

1.  BUDGET SOURCING:
    - SYNC MODE: Pulls live data from the Budget tab. In retirement years, it 
      filters out expenses marked "Removed in Retirement".
    - MANUAL MODE: Allows user to define a fixed annual spending target (default 100k) 
      which is then adjusted for inflation.

2.  INCOME SEQUENCING:
    - PERSISTENT INCOME: The engine first pulls from active income or retirement-
      stable sources (Pensions, Rental Income, Social Security).
    - SOCIAL SECURITY: Automatically kicks in at the user-defined "SS Start Age" 
      with inflation-adjusted payments.
    - SEPP BRIDGE: If enabled, 72(t) distributions are calculated to avoid 
      penalties while bridging to age 59.5.
      
3.  WITHDRAWAL LOGIC (FUNGIBLE PRIORITY):
    - Users can drag and drop the "Draw Priority" list to change which accounts 
      are tapped first (e.g., Cash vs. Taxable vs. Roth).
    - The engine drains each bucket to zero before moving to the next.
    - HELOCs are treated as a revolving liability used only when liquid assets fail.

4.  TAX & BENEFIT MODELING:
    - MAGI TRACKING: Every dollar pulled is categorized (Taxable vs. Non-Taxable).
    - DYNAMIC TAXES: Federal and Michigan state taxes are recalculated every year 
      based on that year's specific MAGI.
    - BENEFIT CALIBRATION: SNAP and Medicaid eligibility are tested annually. 
      Strategies like "Medicaid Max" dynamically adjust withdrawals to stay 
      under 138% of the inflation-adjusted Federal Poverty Level.

5.  PERPETUAL WEALTH PRESERVATION:
    - Calculates the "Safe Withdrawal Rate" (SWR) as (Asset Growth % - Inflation %).
    - When active, the system draws the maximum amount possible that leaves the 
      portfolio "Flat" in Real Dollar terms (Purchasing Power remains constant).
      
6.  INFLATION HANDLING:
    - All future cashflows are modeled in nominal dollars.
    - "Real Dollars" toggle applies a deflationary divisor to show all future 
      values in today's purchasing power.

--------------------------------------------------------------------------------
FILE ARCHITECTURE
--------------------------------------------------------------------------------
- index.html: The shell. Uses a sidebar-main layout with tab-based navigation.
- index.css: Global styles, custom scrollbars, and Tailwind overrides.
- main.js: The entry point. Initializes modules and handles Firebase Auth state.
- core.js: UI Orchestrator. Manages listeners, tab switching, and assumptions.
- data.js: The "Brain". Handles UI scraping, Firebase persistence, and summary updates.
- utils.js: The "Engine". Contains all math for taxes, SEPP, SNAP, and asset colors.
- templates.js: Visual building blocks. Contains the HTML generators for dynamic rows.
- formatter.js: Standardizes currency and numeric input behaviors.
- benefits.js: Specialized logic for Medicaid/HMP and SNAP eligibility.
- projection.js: Long-term forecasting logic. Renders the Stacked Area chart and Data Table.
- burndown.js: Retirement simulator. Handles draggable priority and withdrawal logic.
- auth.js: Google OAuth bridge.

--------------------------------------------------------------------------------
DATA PERSISTENCE (FIREBASE)
--------------------------------------------------------------------------------
- Structure: /users/{uid}/
- All tables are scraped into JSON arrays.
- Scraper covers: inputs, selects, checkboxes, and toggle-buttons (frequency).
- Persistence must be triggered by 'change' events on dropdowns and 'input' on text fields.
================================================================================